type Query {
  post(id: Int!): Post
  posts(filter: PostsFilterInput, pagination: PaginationInput): [Post!]!
  postsByCategories(categories: [String!]!): [Post!]!
  getPresignedUrls(bucket: String!, keys: [String!]!, expiresIn: Int!): [PresignedUrl!]!
}

type Mutation {
  createPost(data: PostCreateInput!): Post!
  updatePost(id: Int!, data: PostUpdateInput!): Post!
  deletePost(id: Int!): Post!
}

type Post {
  id: Int!
  title: String
  content: String!
  files: [String!]
  moderated: Boolean!
  published: Boolean!
  votesDown: Int!
  votesUp: Int!
  createdAt: DateTime
  disabledAt: DateTime
  moderatedAt: DateTime
  publishedAt: DateTime
  author: User!
  categories: [Category!]!
  comments: [Comment!]!
  votes: [Vote!]!
}

input PostCreateInput {
  title: String
  content: String!
  files: [String!]
  moderated: Boolean
  published: Boolean
  votesDown: Int
  votesUp: Int
  authorId: Int!
  categoryIds: [Int!]!
}

input PostUpdateInput {
  title: String
  content: String
  files: [String!]
  moderated: Boolean
  published: Boolean
  votesDown: Int
  votesUp: Int
  authorId: Int
  categoryIds: [Int!]
}

input PostsFilterInput {
  title: String
  content: String
  moderated: Boolean
  published: Boolean
  votesDown: Int
  votesUp: Int
  authorId: Int
  categoryIds: [Int!]
  createdAfter: DateTime
  createdBefore: DateTime
  moderatedAfter: DateTime
  moderatedBefore: DateTime
  publishedAfter: DateTime
  publishedBefore: DateTime
}

type PageInfo {
  endCursor: Int
  hasNextPage: Boolean
}

input PaginationInput {
  cursor: Int
  limit: Int!
}

type PresignedUrl {
  url: String!
  key: String!
}
